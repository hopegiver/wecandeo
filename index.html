<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VideoPack OVP - ê´€ë¦¬ì ì½˜ì†”</title>
    <meta name="description" content="í˜„ëŒ€ì ì´ê³  ì‚¬ìš©ì ì¹œí™”ì ì¸ ë™ì˜ìƒ ê´€ë¦¬ í”Œë«í¼">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¬</text></svg>">

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/base.css">
</head>
<body>
    <!-- ì•± ì»¨í…Œì´ë„ˆ -->
    <div id="app"></div>

    <!-- Bootstrap 5 JS Bundle (Popper í¬í•¨) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- Chart.js for analytics charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- ViewLogic Router -->
    <script src="https://cdn.jsdelivr.net/npm/viewlogic@latest/dist/viewlogic-router.min.js"></script>

    <script>
        // ViewLogic Router ì´ˆê¸°í™”
        const router = new ViewLogicRouter({
            basePath: '/',
            srcPath: '/src',
            mode: 'hash',
            useAuth: false, // ê°œë°œ ì‹œ falseë¡œ ì„¤ì •, ë°°í¬ ì‹œ trueë¡œ ë³€ê²½
            authCheck: () => {
                const token = localStorage.getItem('auth_token');
                return !!token;
            },
            authRedirect: '/login'
        });

        // ì „ì—­ ì„¤ì •
        window.APP_NAME = 'VideoPack OVP';
        window.APP_VERSION = '1.0.0';

        // ì‚¬ìš©ì ì—­í•  ì •ì˜
        window.USER_ROLES = {
            ADMIN: 'ADMIN',           // ìŠˆí¼ ê´€ë¦¬ì
            EDITOR: 'EDITOR',         // í¸ì§‘ì (ì—…ë¡œë“œ, í¸ì§‘ ê°€ëŠ¥)
            VIEWER: 'VIEWER',         // ë·°ì–´ (ì½ê¸° ì „ìš©)
            ANALYST: 'ANALYST'        // ë¶„ì„ê°€ (ë¶„ì„ ê¸°ëŠ¥ë§Œ)
        };

        // í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        window.getCurrentUser = () => {
            const userStr = localStorage.getItem('user');
            if (!userStr) {
                // ê°œë°œìš© ê¸°ë³¸ ì‚¬ìš©ì
                return {
                    id: 1,
                    name: 'ê´€ë¦¬ì',
                    email: 'admin@videopack.com',
                    role: window.USER_ROLES.ADMIN,
                    avatar: null
                };
            }
            return JSON.parse(userStr);
        };

        // ì‚¬ìš©ì ì—­í•  í™•ì¸
        window.hasRole = (role) => {
            const user = window.getCurrentUser();
            return user && user.role === role;
        };

        // ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
        window.isAdmin = () => {
            return window.hasRole(window.USER_ROLES.ADMIN);
        };

        // í¸ì§‘ ê¶Œí•œ í™•ì¸ (ê´€ë¦¬ì + í¸ì§‘ì)
        window.canEdit = () => {
            const user = window.getCurrentUser();
            return user && (user.role === window.USER_ROLES.ADMIN ||
                          user.role === window.USER_ROLES.EDITOR);
        };

        // ë¶„ì„ ê¶Œí•œ í™•ì¸ (ëª¨ë“  ì—­í• )
        window.canViewAnalytics = () => {
            return !!window.getCurrentUser();
        };

        // API í—¬í¼ (ì„ íƒì‚¬í•­)
        window.API_BASE_URL = '/api'; // ì‹¤ì œ API ì„œë²„ ì£¼ì†Œë¡œ ë³€ê²½

        // ê°„ë‹¨í•œ ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
        window.logout = () => {
            localStorage.removeItem('auth_token');
            localStorage.removeItem('user');
            window.location.hash = '#/login';
        };

        // ê°œë°œ ëª¨ë“œ í”Œë˜ê·¸
        window.DEV_MODE = true;

        console.log('%cğŸ¬ VideoPack OVP', 'font-size: 20px; font-weight: bold; color: #6366f1;');
        console.log('%cê´€ë¦¬ì ì½˜ì†”ì´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.', 'color: #10b981;');
        console.log('Version:', window.APP_VERSION);
        console.log('User:', window.getCurrentUser().name);
    </script>
</body>
</html>
